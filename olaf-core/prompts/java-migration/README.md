# Java Migration Framework

This directory contains the complete Java migration framework for OLAF, providing systematic migration from legacy Java versions to modern JDK 21 + Spring Boot 3.x + Jakarta EE.

## Directory Structure

```
olaf-core/prompts/java-migration/
├── tasks/                          # All migration task how-to files
│   ├── _templates/                 # Framework templates and standards
│   ├── future/                     # Future/unused tasks (install/verify)
│   ├── actuator-updates/           # Spring Boot Actuator configuration updates
│   ├── apply-jdk17-upgrade/        # JDK 17 upgrade implementation
│   ├── boot3-readiness/            # Spring Boot 3 readiness assessment
│   ├── checkpoint/                 # Phase validation and verification
│   ├── ci-pipeline-inventory/      # CI/CD pipeline discovery and analysis
│   ├── dependency-alignment/       # Dependency updates for JDK 21 compatibility
│   ├── git-branch-tag/             # Git workflow and branching
│   ├── integration-test/           # End-to-end integration testing
│   ├── jakarta-migration/          # javax → jakarta namespace migration
│   ├── jdk-switch/                 # JDK environment switching
│   ├── junit4-to-5-migration/      # JUnit 4 to 5 migration
│   ├── language-feature-adoption/  # JDK 21 language features adoption
│   ├── modernization-opportunities/ # Post-migration modernization catalog
│   ├── performance-and-gc-profiling/ # Performance comparison and profiling
│   ├── remediation-and-tests/      # JDK 21 issue resolution and testing
│   ├── rewrite-config/             # OpenRewrite plugin configuration
│   ├── rewrite-dry-run/            # OpenRewrite dry run execution
│   ├── servlet-changes/            # Servlet API migration (javax → jakarta)
│   ├── update-dependencies/        # Dependency alignment with Spring Boot BOM
│   ├── upgrade-boot3/              # Spring Boot 2.7 → 3.x upgrade
│   ├── upgrade-sb-2.3-to-2.4/      # Spring Boot 2.3 → 2.4 incremental upgrade
│   ├── upgrade-sb-2.4-to-2.5/      # Spring Boot 2.4 → 2.5 incremental upgrade
│   ├── upgrade-sb-2.5-to-2.6/      # Spring Boot 2.5 → 2.6 incremental upgrade
│   ├── upgrade-sb-2.6-to-2.7/      # Spring Boot 2.6 → 2.7 incremental upgrade
│   └── validation-changes/         # Validation API migration (javax → jakarta)
└── README.md                       # This file
```

## Migration Phases

### Phase 1: JDK 17 + Spring Boot 2.x Incremental Upgrades
- Modernize to JDK 17
- Incrementally upgrade Spring Boot through 2.4, 2.5, 2.6, 2.7 releases
- Upgrade JUnit 4 to 5
- Establish green baseline for Phase 2

### Phase 2: Spring Boot 3.x + Jakarta EE Migration
- Upgrade to Spring Boot 3.4.0
- Migrate from javax.* to jakarta.* packages
- Update dependencies for Boot 3 compatibility
- Address API changes (Servlet, Validation, Actuator)

### Phase 3: JDK 21 + Modernization
- Upgrade to JDK 21
- Resolve JDK 21 compatibility issues
- Performance validation and profiling
- Adopt modern Java language features
- Create modernization opportunities catalog

## How-to Structure

Each task directory contains a standardized `how-to.md` file with:

1. **Goal**: Clear objective of the task
2. **Prerequisites**: Required conditions before execution
3. **Preferred Approach (Automated)**: Primary execution path with executable commands
4. **Fallback Approach (Manual)**: Manual steps when automation fails
5. **Verification Commands**: Explicit commands to validate success
6. **Issue Detection & Remediation**: For each potential issue:
   - **Detection Pattern**: How to identify the issue
   - **Remediation**: Step-by-step fix instructions
   - **Validation**: Commands to verify the fix worked
7. **Issue Collection**: JSON format for unresolved issues (only when remediation fails)
8. **Success Criteria**: Checklist of measurable outcomes

## Execution Workflow

The framework follows a Detection → Remediation → Validation → Collection workflow:

1. **Detect** issues using patterns/commands
2. **Apply remediation** using provided guidance
3. **Validate** the fix worked
4. **Collect issues** only if remediation fails or is deferred

## Usage

This framework is designed to be executed by the `run-java-migration` prompt, which:

1. Reads migration plans generated by `bootstrap-java-migration`
2. Executes tasks sequentially following how-to guidance
3. Applies issue detection and remediation automatically
4. Collects unresolved issues in structured JSON format
5. Updates migration plan status and creates git commits

## Key Features

- **25 standardized how-to files** covering complete migration path
- **Automated issue detection and remediation** for common problems
- **Executable verification commands** with clear pass/fail criteria
- **Consistent issue collection** in JSON format
- **Robust fallback approaches** when automation fails
- **Comprehensive verification** at each step

## Framework Status

✅ **Production Ready**: All 25 tasks follow standardized structure with proper remediation workflow