---
name: troubleshoot-logs-to-sources
description: Guided troubleshooting workflow using log-to-source mapping to trace issues from log entries back to problematic code and data
tags: [troubleshooting, logs, debugging, source-mapping, analysis]
---


## Framework Validation
You MUST apply the <olaf-work-instructions> framework.
You MUST pay special attention to**:
- <olaf-general-role-and-behavior> - Expert domain approach
- <olaf-interaction-protocols> - Appropriate execution protocol
You MUST strictly apply <olaf-framework-validation>.

## Time Retrieval
You MUST get current time in YYYYMMDD-HHmm format using terminal commands:
- Windows: `Get-Date -Format "yyyyMMdd-HHmm"`
- Unix/Linux/macOS: `date +"%Y%m%d-%H%M"`

Use terminal commands, not training data.

Use terminal commands, not training data.

## Input Parameters
**IMPORTANT**: When you don't have entries provided, ask the USER to provide them.
- **log_mapping_file**: string - Path to JSON file generated by analyze-log-source-mapping.ps1
- **specific_log_entries**: array[string] - (Optional) Specific log entries or error messages to investigate
- **time_range**: string - (Optional) Time range for log analysis (e.g., "2024-01-15 14:00 to 14:30")
- **issue_description**: string - Brief description of the problem being investigated

## Process

1. **Mapping Analysis**:
   - Load and parse the log-to-source mapping file
   - Validate mapping completeness and coverage
   - Identify high-frequency logging locations
   - Review reverse lookup index for pattern matching

2. **Log Entry Investigation**:
   - Match specific log entries to source code locations
   - Analyze log patterns and variable interpolation
   - Identify potential data inputs that caused issues
   - Trace execution flow through related log statements

3. **Source Code Analysis**:
   - Examine source files where problematic logs originate
   - Review surrounding code context for error conditions
   - Identify data validation and error handling gaps
   - Analyze function parameters and data flow

4. **Root Cause Identification**:
   - Correlate log patterns with code logic
   - Identify problematic data inputs or edge cases
   - Review error propagation paths
   - Determine systemic vs. isolated issues

## Output/Result Format
Use `[id:templates_dir]developer/troubleshooting-analysis-template.md` to structure the analysis:
- Follow the template's sections for consistency
- Include source code snippets and log correlations
- Document root cause analysis and recommendations
- Provide actionable fix suggestions with code examples

## Output to USER
1. **Issue Summary**:
   - Problem description and scope
   - Affected components and timeframe
   - Impact assessment and urgency level

2. **Source Code Locations**:
   - Files and line numbers generating problematic logs
   - Code snippets with context and explanations
   - Data flow analysis through logging points

3. **Root Cause Analysis**:
   - Identified problematic conditions or data
   - Error propagation paths and failure modes
   - Contributing factors and system interactions

4. **Recommendations**:
   - Immediate fixes with code examples
   - Preventive measures and validation improvements
   - Monitoring and alerting enhancements
   - Long-term architectural considerations

## Domain-Specific Rules
- Rule 1: Always correlate log entries with actual source code context
- Rule 2: Identify both immediate cause and underlying system issues
- Rule 3: Provide actionable fixes with specific code changes
- Rule 4: Consider data validation and error handling improvements
- Rule 5: Document assumptions and limitations in the analysis

## Required Actions
1. Load and validate log-to-source mapping
2. Analyze specific log entries against source patterns
3. Examine source code context for root causes
4. Identify problematic data patterns and conditions
5. Generate comprehensive troubleshooting report with fixes

⚠️ **Critical Notes**
- Verify all source code references against actual files
- Test proposed fixes in isolated environment first
- Consider security implications of logging sensitive data
- Document any assumptions made during analysis
- Include confidence levels for root cause conclusions
